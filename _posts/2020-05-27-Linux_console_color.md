---
title: Linux控制台程序彩色输出
date: 2020-05-26 22:58:53
category: 
- Skills
tags:
- Linux
- C/C++
---
## 简介

很多控制台程序都有彩色输出的功能，例如红色的error提醒，非常的醒目。
[![tEhsl8.png](https://s1.ax1x.com/2020/05/27/tEhsl8.png)](https://imgchr.com/i/tEhsl8)

那么我们如何为自己的 C/C++ 程序添 加彩色输出的能力了，在Linux系统上，做到这点很简单。   
只需要打印一段特殊的字符序列即可.
例如
```C
#include <stdio.h>

int main()
{
    printf("\e[0;31m Red, World\n");
    return 0;
}
```

效果如图
![tE47Ct.png](https://s1.ax1x.com/2020/05/27/tE47Ct.png)

在上述代码块中，`\e[0;31m]` 就是控制控制台字体为红色的转义序列(escape sequence)。  
该转义序列以控制字符'ESC'开头。该字符的ASCII码十进制表示为27，十六进制表示为0x1B，八进制表示为033。多数转义序列超过两个字符，故通常以'ESC'和左括号'['开头。该起始序列称为控制序列引导符(CSI，Control Sequence Intro)，通常由'\e['或'\e['代替。

实际上，改转义序列是系统提供的功能，与具体语言无关。  
例如在Linux Terminal中使用指令`echo -e "\e[0;32m Hello World. \e[0m \n"` 也可以输出一条绿色的Hello World.  

## 用法

在任何要改变颜色的字符串前插入转义序列即可，注意该转义序列的作用会一直存在，除非显式的打印`"\e[0m"`，该序列使得终端恢复默认状态。   
除了在字符串之前添加之外，该转义序列也可以通过单独的printf语句生效，如`printf(\e[0;31m)` 会使得之后的输出变为红色。

转义序列的格式为
` \e[显示方式;前景色;背景色m输出字符串\e[0m`
其中`\e[0m用于恢复默认颜色。  

       显示：0(默认)、1(粗体/高亮)、22(非粗体)、4(单条下划线)、24(无下划线)、5(闪烁)、25(无闪烁)、7(反显、翻转前景色和背景色)、27(无反显)
       颜色：0(黑)、1(红)、2(绿)、 3(黄)、4(蓝)、5(洋红)、6(青)、7(白)
       前景色为30+颜色值，如31表示前景色为红色；背景色为40+颜色值，如41表示背景色为红色。

## 更多的设置项

如上节谈到，更改序列中的值即可实现多种颜色输出以及除颜色外的其他功能，具体内容如下：   

    \e[0m 关闭所有属性  
    \e[1m 设置高亮度(粗体)  
    \e[4m 下划线  
    \e[5m 闪烁  
    \e[7m 反显  
    \e[8m 消隐  
    \e[30m 至 \e[37m 设置前景色  
    \e[40m 至 \e[47m 设置背景色  
    \e[nA 光标上移n行   
    \e[nB 光标下移n行  
    \e[nC 光标右移n行  
    \e[nD 光标左移n行  
    \e[y;xH设置光标位置  
    \e[2J 清屏  
    \e[K 清除从光标到行尾的内容  
    \e[s 保存光标位置   
    \e[u 恢复光标位置  
    \e[?25l 隐藏光标  
    \e[?25h 显示光标  

各数字所代表的颜色如下：  

    前景色：30黑 31红 32绿 33黄 34蓝 35紫 36青 37白  
    背景色：40黑 41红 42绿 43黄 44青 45蓝 46青 47白

你也可以在Linux Terminal中通过`man console_codes`查看更多的参数。